!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.StopWatch=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),r=!(!performance||!performance.mark),n=function(){function n(e){t(this,n),this.name=e,this.category,this.duration=-1,this.startTime=0}return e(n,[{key:"start",value:function(){return this.startTime=this.constructor.now(),r&&performance.mark("stopwatch:mark_"+this.name+"_start"),this}},{key:"stop",value:function(){var t="stopwatch:mark_"+this.name+"_";return this.duration=this.constructor.now()-this.startTime,r&&performance.getEntriesByName(t+"start").length>0&&(performance.mark(t+"stop"),performance.measure("stopwatch:measure_"+this.name,t+"start",t+"stop")),this}},{key:"clear",value:function(){return performance.clearMarks("stopwatch:mark_"+this.name+"_start"),performance.clearMarks("stopwatch:mark_"+this.name+"_stop"),performance.clearMeasures("stopwatch:measure_"+this.name),this}},{key:"send",value:function(){if(!this.category)throw new Error("Category is missing.");return window.ga&&this.duration>=0&&window.ga("send","timing",this.category,this.name,Math.round(this.duration)),this}}],[{key:"now",value:function(){return performance.now()}}]),n}();return new(function(){function r(){t(this,r),this._timings=[]}return e(r,[{key:"create",value:function(t,e){if("string"!=typeof t)throw new Error("Parameter is missing.");var r=new n(t);return e&&e.category&&(r.category=e.category),this._timings.push(r),r}},{key:"get",value:function(t){var e=this._timings;if("string"==typeof t){var r=this.constructor.find(e,t);if(!r)throw new Error("Timing is missing.");return r}return this._timings}},{key:"clear",value:function(t){var e=this._timings;if("string"==typeof t){var r=this.constructor.find(e,t);r.clear(),this.constructor.clear(e,r)}else e.forEach(function(t){return t.clear()}),e.length=0;return this}},{key:"send",value:function(t){var e=this._timings;if("string"==typeof t){var r=this.constructor.find(e,t);if(!r)throw new Error("Timing is missing.");r.send()}else this.constructor.send(e);return this}}],[{key:"find",value:function(t,e){return t.find(function(t){return t.name===e})}},{key:"clear",value:function(t,e){for(var r=0;r<t.length;r++)if(t[r].name===e.name){t.splice(r,1);break}}},{key:"send",value:function(t){t.forEach(function(t){return t.send()})}}]),r}())});